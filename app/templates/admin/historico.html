{% extends 'base.html' %}
{% block content %}
<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-end mb-8">
    <div>
      <h1 class="text-3xl font-bold text-gray-100">Hist√≥rico de Invent√°rios</h1>
      <p class="text-gray-400 mt-2">Acesse e exporte relat√≥rios de invent√°rios fechados.</p>
    </div>
    <a href="{{ url_for('admin.dashboard') }}" class="flex items-center gap-2 bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg transition font-medium">
      <span>‚Üê</span> Voltar
    </a>
  </div>

  {% if inventarios %}
  <div class="bg-slate-800 rounded-xl border border-slate-700 shadow-lg overflow-hidden">
    <table class="w-full">
      <thead>
        <tr class="bg-slate-900 border-b border-slate-700">
          <th class="px-6 py-4 text-left text-sm font-bold text-gray-300 uppercase tracking-wider">ID</th>
          <th class="px-6 py-4 text-left text-sm font-bold text-gray-300 uppercase tracking-wider">Descri√ß√£o</th>
          <th class="px-6 py-4 text-left text-sm font-bold text-gray-300 uppercase tracking-wider">Cria√ß√£o</th>
          <th class="px-6 py-4 text-left text-sm font-bold text-gray-300 uppercase tracking-wider">Fechamento</th>
          <th class="px-6 py-4 text-right text-sm font-bold text-gray-300 uppercase tracking-wider">Valor Total</th>
          <th class="px-6 py-4 text-center text-sm font-bold text-gray-300 uppercase tracking-wider">A√ß√£o</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-700">
        {% for inv in inventarios %}
        <tr class="hover:bg-slate-700/50 transition">
          <td class="px-6 py-4 text-sm text-gray-200 font-medium">{{ inv['id'] }}</td>
          <td class="px-6 py-4 text-sm text-gray-300">{{ inv['descricao'] or '‚Äî' }}</td>
          <td class="px-6 py-4 text-sm text-gray-400">{{ inv['data_criacao'] | datetime_br }}</td>
          <td class="px-6 py-4 text-sm text-gray-400">{{ inv['data_fechamento'] | datetime_br }}</td>
          <td class="px-6 py-4 text-sm text-right font-semibold text-emerald-400">
            R$ {{ inv.valor_total | reais }}
          </td>
          <td class="px-6 py-4 text-center">
            <a href="{{ url_for('admin.exportar_excel', inventario_id=inv['id']) }}" class="inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition shadow-lg shadow-blue-900/20">
              <span>üì•</span> Baixar Excel
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="bg-slate-800 rounded-xl border border-slate-700 p-12 text-center">
    <div class="text-5xl mb-4">üì≠</div>
    <h3 class="text-xl font-bold text-gray-200 mb-2">Nenhum invent√°rio fechado</h3>
    <p class="text-gray-400">Complete e feche um invent√°rio para visualizar o hist√≥rico e gerar relat√≥rios.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
